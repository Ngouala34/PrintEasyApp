// src/app/features/order/order.component.scss
@import '../../../styles/variables';
@import '../../../styles/mixins';

.order-page {
  margin-top: 80px;
  padding: $spacing-3xl 0;
  background: $gray-light;
  min-height: calc(100vh - 80px);
}

.order-container {
  @include container;
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-2xl;

  @include responsive(lg) {
    grid-template-columns: 1fr 320px;
  }
}

// Progress Steps
.progress-steps {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  margin-bottom: $spacing-3xl;
  padding: $spacing-xl;
  background: $white;
  border-radius: $radius-xl;
  box-shadow: $shadow-md;
  grid-column: 1 / -1;

  @include responsive(md) {
    gap: $spacing-lg;
  }
}

.step {
  display: flex;
  align-items: center;
  gap: $spacing-md;
  position: relative;

  &.completed .step-circle {
    background: $success;
    border-color: $success;
    color: $white;
  }

  &.active .step-circle {
    background: $primary-yellow;
    border-color: $primary-yellow;
    color: $primary-dark;
    transform: scale(1.1);
  }
}

.step-circle {
  @include flex-center;
  width: 50px;
  height: 50px;
  border-radius: $radius-full;
  border: 3px solid $gray-light;
  background: $white;
  color: $gray-medium;
  font-weight: $font-weight-bold;
  font-size: $font-size-lg;
  transition: all $transition-base;
  flex-shrink: 0;

  @include responsive(md) {
    width: 60px;
    height: 60px;
  }
}

.step-label {
  display: none;

  @include responsive(md) {
    display: flex;
    flex-direction: column;
    gap: $spacing-xs;
  }
}

.step-title {
  font-weight: $font-weight-semibold;
  color: $primary-dark;
  font-size: $font-size-base;
}

.step-subtitle {
  font-size: $font-size-xs;
  color: $gray-medium;
}

.step-line {
  width: 40px;
  height: 3px;
  background: $gray-light;
  transition: background $transition-base;

  @include responsive(md) {
    width: 80px;
  }

  &.completed {
    background: $success;
  }
}

// Order Content
.order-content {
  display: flex;
  flex-direction: column;
  gap: $spacing-2xl;
}

.step-content {
  background: $white;
  border-radius: $radius-xl;
  padding: $spacing-2xl;
  box-shadow: $shadow-md;

  @include responsive(md) {
    padding: $spacing-3xl;
  }
}

.content-title {
  @include heading-primary;
  font-size: $font-size-2xl;
  margin-bottom: $spacing-md;

  @include responsive(md) {
    font-size: $font-size-3xl;
  }
}

.content-description {
  color: $gray-dark;
  font-size: $font-size-lg;
  margin-bottom: $spacing-2xl;
}

// Upload Zone
.upload-zone {
  @include flex-center;
  flex-direction: column;
  gap: $spacing-lg;
  padding: $spacing-3xl;
  border: 3px dashed lighten($gray-medium, 20%);
  border-radius: $radius-xl;
  cursor: pointer;
  transition: all $transition-base;
  background: $gray-light;
  min-height: 400px;

  &:hover {
    border-color: $primary-yellow;
    background: lighten($primary-yellow, 45%);
  }
}

.upload-icon {
  color: $gray-medium;
  transition: color $transition-base;

  .upload-zone:hover & {
    color: $primary-dark;
  }
}

.upload-text {
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: $spacing-xs;

  strong {
    font-size: $font-size-xl;
    color: $primary-dark;
  }

  span {
    color: $gray-dark;
  }
}

.upload-formats {
  font-size: $font-size-sm;
  color: $gray-medium;
  padding: $spacing-sm $spacing-lg;
  background: $white;
  border-radius: $radius-full;
}

.upload-spinner {
  @include flex-center;
  flex-direction: column;
  gap: $spacing-lg;

  p {
    color: $gray-dark;
    font-weight: $font-weight-medium;
  }
}

.spinner {
  width: 60px;
  height: 60px;
  border: 4px solid $gray-light;
  border-top-color: $primary-yellow;
  border-radius: $radius-full;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.spinner-small {
  width: 20px;
  height: 20px;
  border: 3px solid rgba($primary-dark, 0.2);
  border-top-color: $primary-dark;
  border-radius: $radius-full;
  animation: spin 0.8s linear infinite;
}

// File Preview
.file-preview {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: $spacing-lg;
  align-items: center;
  padding: $spacing-xl;
  background: $gray-light;
  border-radius: $radius-xl;
  margin-bottom: $spacing-lg;
}

.image-preview {
  width: 120px;
  height: 120px;
  border-radius: $radius-lg;
  overflow: hidden;
  box-shadow: $shadow-md;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.pdf-preview {
  @include flex-center;
  width: 120px;
  height: 120px;
  background: $white;
  border-radius: $radius-lg;
  box-shadow: $shadow-md;
}

.file-info {
  display: flex;
  flex-direction: column;
  gap: $spacing-xs;
}

.file-name {
  font-weight: $font-weight-semibold;
  color: $primary-dark;
  font-size: $font-size-lg;
  @include truncate(2);
}

.file-size {
  color: $gray-medium;
  font-size: $font-size-sm;
}

.btn-remove {
  @include flex-center;
  width: 40px;
  height: 40px;
  background: $white;
  border: 2px solid $gray-light;
  border-radius: $radius-md;
  cursor: pointer;
  transition: all $transition-fast;
  color: $gray-dark;

  &:hover {
    background: $error;
    border-color: $error;
    color: $white;
  }
}

.upload-success {
  @include flex-center;
  gap: $spacing-md;
  padding: $spacing-lg;
  background: lighten($success, 50%);
  border-radius: $radius-lg;
  color: darken($success, 10%);
  font-weight: $font-weight-medium;
}

// Configuration
.config-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-2xl;
}

.config-section {
  display: flex;
  flex-direction: column;
  gap: $spacing-lg;

  &.full-width {
    grid-column: 1 / -1;
  }
}

.config-label {
  display: flex;
  align-items: center;
  gap: $spacing-sm;
  font-weight: $font-weight-semibold;
  color: $primary-dark;
  font-size: $font-size-lg;

  svg {
    color: $primary-yellow;
  }
}

.options-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-md;

  @include responsive(sm) {
    grid-template-columns: repeat(2, 1fr);
  }

  &.two-cols {
    @include responsive(sm) {
      grid-template-columns: repeat(2, 1fr);
    }
  }
}

.option-card {
  position: relative;
  display: block;
  padding: $spacing-lg;
  background: $white;
  border: 2px solid $gray-light;
  border-radius: $radius-lg;
  cursor: pointer;
  transition: all $transition-base;

  input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }

  &:hover {
    border-color: $primary-yellow;
    box-shadow: $shadow-md;
  }

  &.selected {
    border-color: $primary-yellow;
    background: lighten($primary-yellow, 45%);
    box-shadow: $shadow-md;

    &::after {
      content: '';
      position: absolute;
      top: $spacing-sm;
      right: $spacing-sm;
      width: 24px;
      height: 24px;
      background: $primary-yellow;
      border-radius: $radius-full;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Cpath d='M3 8L6 11L13 4' stroke='%230e0734' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: center;
    }
  }
}

.option-content {
  display: flex;
  flex-direction: column;
  gap: $spacing-xs;
}

.option-name {
  font-weight: $font-weight-medium;
  color: $primary-dark;
}

.option-price {
  font-size: $font-size-sm;
  color: $gray-dark;
  font-weight: $font-weight-semibold;
}

// Quantity Control
.quantity-control {
  display: flex;
  align-items: center;
  gap: $spacing-md;
  max-width: 300px;
}

.qty-btn {
  @include flex-center;
  width: 48px;
  height: 48px;
  background: $white;
  border: 2px solid $gray-light;
  border-radius: $radius-md;
  cursor: pointer;
  transition: all $transition-fast;
  color: $gray-dark;

  &:hover {
    border-color: $primary-yellow;
    background: lighten($primary-yellow, 45%);
    color: $primary-dark;
  }
}

.qty-input {
  @include input-base;
  text-align: center;
  font-size: $font-size-xl;
  font-weight: $font-weight-semibold;
  flex: 1;
  padding: $spacing-md;
}

// Summary
.summary-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-2xl;

  @include responsive(lg) {
    grid-template-columns: 1fr 400px;
  }
}

.summary-details,
.summary-pricing {
  padding: $spacing-xl;
  background: $gray-light;
  border-radius: $radius-lg;
}

.summary-title {
  font-family: $font-heading;
  font-size: $font-size-xl;
  font-weight: $font-weight-semibold;
  color: $primary-dark;
  margin-bottom: $spacing-lg;
}

.summary-item {
  @include flex-between;
  padding: $spacing-md 0;
  border-bottom: 1px solid lighten($gray-medium, 30%);

  &.highlight {
    background: lighten($primary-yellow, 45%);
    padding: $spacing-md $spacing-lg;
    border-radius: $radius-md;
    border-bottom: none;
    margin-top: $spacing-md;
  }
}

.summary-label {
  color: $gray-dark;
  font-weight: $font-weight-medium;
}

.summary-value {
  color: $primary-dark;
  font-weight: $font-weight-semibold;
}

.price-item {
  @include flex-between;
  padding: $spacing-md 0;
  color: $gray-dark;
}

.price-divider {
  height: 2px;
  background: lighten($gray-medium, 30%);
  margin: $spacing-lg 0;
}

.price-total {
  @include flex-between;
  padding: $spacing-lg;
  background: $primary-dark;
  color: $white;
  border-radius: $radius-lg;
  font-size: $font-size-xl;
  font-weight: $font-weight-bold;
  margin-bottom: $spacing-xl;
}

.btn-pay {
  @include button-primary;
  width: 100%;
  padding: $spacing-lg;
  font-size: $font-size-lg;
  justify-content: center;
}

// Navigation
.step-navigation {
  @include flex-between;
  padding: $spacing-xl;
  background: $white;
  border-radius: $radius-xl;
  box-shadow: $shadow-md;
  gap: $spacing-lg;
}

.btn-prev {
  @include button-outline;
  padding: $spacing-md $spacing-xl;
}

.btn-next {
  @include button-primary;
  padding: $spacing-md $spacing-xl;
  margin-left: auto;
}

// Price Sidebar
.price-sidebar {
  position: sticky;
  top: 100px;
  height: fit-content;

  @media (max-width: $breakpoint-lg) {
    display: none;
  }
}

.sidebar-card {
  background: $white;
  border-radius: $radius-xl;
  padding: $spacing-xl;
  box-shadow: $shadow-md;
}

.sidebar-title {
  font-family: $font-heading;
  font-size: $font-size-xl;
  font-weight: $font-weight-semibold;
  color: $primary-dark;
  margin-bottom: $spacing-lg;
}

.sidebar-items {
  display: flex;
  flex-direction: column;
  gap: $spacing-md;
}

.sidebar-item {
  @include flex-between;
  font-size: $font-size-sm;
  color: $gray-dark;

  span:last-child {
    font-weight: $font-weight-semibold;
    color: $primary-dark;
  }
}

.sidebar-divider {
  height: 2px;
  background: $gray-light;
  margin: $spacing-lg 0;
}

.sidebar-total {
  @include flex-between;
  padding: $spacing-lg;
  background: linear-gradient(135deg, $primary-dark, lighten($primary-dark, 8%));
  color: $white;
  border-radius: $radius-lg;
  margin-bottom: $spacing-lg;

  span:first-child {
    font-weight: $font-weight-medium;
  }
}

.total-amount {
  font-size: $font-size-2xl;
  font-weight: $font-weight-bold;
}

.sidebar-info {
  display: flex;
  align-items: flex-start;
  gap: $spacing-sm;
  padding: $spacing-md;
  background: lighten($info, 45%);
  border-radius: $radius-md;
  font-size: $font-size-xs;
  color: darken($info, 10%);

  svg {
    flex-shrink: 0;
    margin-top: 2px;
  }
}